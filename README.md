3Dに見えるかもしれませんが2Dです。
まがいなりにもZバッファによる作画が出来ました。
transform関数を自作し。テクスチャを変形させました。
三角形の頂点が画面外に飛び出していてもクリッピングできます。
a,b,c,d,e,fはtexture.mjsで求めていますのでそれを使います。
三角形のクリッピングは切り取るというより
考え方によっては三角形にテクスチャを張り付けたともとらえられます。
その三角形をくっ付ければ木の箱の１枚です。
できたのをZバッファに登録し、
左上から右下までZ値を参考にして、一番自分に近い色のみ獲得し
レガシーなドットインパクトをすれば
モダンなZバッファ法です。
隠れている三角形がZ値が後ろにあり、
隠している三角形のZ値が手前にあります。
カリングにオンオフを付けました。
ボックスには重力があり地面と接しています。
地面はボックスを薄くしています。
カメラの向いている方向に動きます。
1,2キーが上下回転、2,3キーが横回転,4,5キーがZ回転します。
ＵとＤでＺ方向に動きます。
方向キーがX,Y方向です。
Zソート法と背面カリングの陰面処理です。
urlはhttps://seijinakata.github.io/3Dgamebox/index
です。
youtubeのEijo TakagiさんのＣ言語をjavascriptに変換しました。
Daniel Kreuterさん、だえうさんのコードも参考にさせていただきました。
